<!DOCTYPE html>
<html lang="en">
<head>
    <!--JQuery CDN-->
    <script src="https://code.jquery.com/jquery-3.3.1.js"
            integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
            crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>Title</title>
    <button onclick="createStore('2323','222',2)">create store</button>
    <button onclick="processingVerification()">processingVerification</button>
    <button onclick="changeCapacity('192.168.0.203','122')">changeCapacity</button>
    <button onclick="updateAccount('Kyle Van Allen', '2323',  '232',  '22.00',  '121',  2)">updateAccount</button>
    <button onclick="createConnection('192.168.1.1','192.168.0.3','1','2')">createConnection</button>
    <br>
    <br>
    <input type="text" id="start" placeholder="startIp">
    <input type="text" id="end" placeholder="endIp">
    <button onclick="getNextIp()">getNextIp</button>

    <br>
    <br>
    <input type="text" id="isFullIp" placeholder="isFullIp">
    <button onclick="isFull()">isFull?</button>
</head>
<body>

</body>
<script>
    function createStore(ip,name,region){
        $.ajax({
            url: '/createStore',
            method: 'POST',
            data:{
                ip:ip,
                name:name,
                region:region
            },
            success: function (data) {
                console.log(data);
            }
        });
    }

    var transactionInfo= {
        transactionType: "CREDIT",
        transactionAmount: 100.0,
    cardId: 3448997612325598,
    cardName: "Kyle Van Allen",
    securityCode: 577,
    expirationDate: "08/22"
    };



    function processingVerification(){
        console.log(transactionInfo);
        $.ajax({
            url: '/processingVerification',
            method: 'POST',
            contentType:"application/json;charset=utf-8",
            data: JSON.stringify(transactionInfo),
            success: function (data) {
                //OK | ERROR
                console.log(data);
                if(data=="OK"){

                }else{

                }
            }
        });
    }

    function changeCapacity(ip,newLimit){
        alert("ip="+ip+" li:"+newLimit);
        $.ajax({
            url: '/changeCapacity',
            method: 'POST',
            data:{
                ip:ip,
                newLimit:newLimit
            },
            success: function (data) {
                //OK | ERROR
                console.log(data);
            }
        });
    }

    function getNextIp(){
        var ip =$("#start").val();
        var destination = $("#end").val();
        console.log(ip+"  "+destination);
        $.ajax({
            url: '/getNextIp?ip='+ip+'&destination='+destination,
            method: 'GET',
            success: function (data) {
                alert(data);
            }
        });
    }

    function isFull() {
        var ip = $("#isFullIp").val();
        $.ajax({
            url: '/isFull?ip='+ip,
            method: 'GET',
            success: function (data) {
                alert(data);
            }
        });
    }




    function updateAccount(accountName, accountAddress,  accountPhone,  limit,  balance,  accountId){
        $.ajax({
            url: '/updatingaccounts',
            method: 'POST',
            data:{
                accountName:accountName,
                accountAddress:accountAddress,
                accountPhone:accountPhone,
                limit:limit,
                balance:balance,
                accountId:accountId
            },
            success: function (data) {
                //OK | ERROR
                console.log(data);
            }
        });
    }

    function createConnection(start_ip,end_ip,is_active,weight) {
        $.ajax({
            url: '/createConnection',
            method: 'POST',
            data:{
                start_ip: start_ip,
                end_ip: end_ip,
                is_active: is_active,
                weight: weight
            },
            success: function(data) {
                console.log(data);
                // var newConnection ={
                //     to: end_ip.substr(10),
                //     from: start_ip.substr(10),
                //     label: weight,
                //     color:{
                //         color: "#2B7CE9",
                //     }
                // };
                // edges.add(newConnection);
                // getNetworkInfo();
            }
        });
    }

</script>
</html>